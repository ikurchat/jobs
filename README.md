# Jobs

Автономный ИИ-ассистент с Claude Code в Telegram.

## Что это

Полноценный Claude Code агент в твоём Telegram. Пишешь задачу — он делает. Работает 24/7 в Docker контейнере.

```
— Напомни через час купить молоко
— ✅ Напомню в 15:30

— Спарси hh.ru и найди вакансии python
— [ставит библиотеки, пишет парсер, запускает, присылает результат]

— Подключи postgres и покажи таблицы
— [подключает MCP, делает запрос, показывает результат]
```

**Это не чат-бот. Это агент с полным доступом к системе.**

## Возможности

| Функция | Описание |
|---------|----------|
| **Выполнение задач** | Код, скрипты, парсеры, боты — всё что может Claude Code |
| **Голосовые** | Транскрипция через Whisper → текст → агент |
| **Файлы** | Фото и документы сохраняются, агент может их обработать |
| **Планировщик** | Напоминания, отложенные задачи, повторяющиеся действия |
| **Память** | Долгосрочная память + дневные логи + векторный поиск |
| **Heartbeat** | Проактивные уведомления — агент сам пишет когда нужно |
| **MCP интеграции** | Подключай postgres, github, slack и 700+ других через чат |

## Архитектура

```
┌─────────────────────────────────────────────────────────────────┐
│                      Docker Container                           │
│                                                                 │
│  ┌──────────────┐     ┌──────────────────────────────────────┐ │
│  │   Telegram   │────▶│           Claude Code                │ │
│  │   (Telethon) │◀────│      + MCP Tools + Memory            │ │
│  └──────────────┘     └──────────────────────────────────────┘ │
│         │                           │                           │
│         │              ┌────────────┴────────────┐             │
│         │              │                         │             │
│         ▼              ▼                         ▼             │
│  ┌──────────────┐  ┌──────────┐  ┌─────────────────────────┐  │
│  │  Heartbeat   │  │ Scheduler│  │     External MCP        │  │
│  │  (30 min)    │  │ (SQLite) │  │  postgres, github, ...  │  │
│  └──────────────┘  └──────────┘  └─────────────────────────┘  │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                      Memory System                       │   │
│  │  MEMORY.md │ memory/*.md │ sessions/*.md │ sqlite-vec   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  /data/          — персистентные данные                        │
│  /workspace/     — рабочая директория агента                   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## Быстрый старт

```bash
# 1. Клонируй
git clone https://github.com/qanelph/jobs.git
cd jobs

# 2. Настрой
cp .env.example .env
# Заполни: TG_API_ID, TG_API_HASH, TG_USER_ID, OPENAI_API_KEY

# 3. Запусти
docker-compose up

# 4. Залогинься
# - Введи телефон и код для Telegram
# - Пройди OAuth для Claude
```

## Конфигурация

| Переменная | Описание | Обязательно |
|------------|----------|-------------|
| `TG_API_ID` | Telegram API ID | Да |
| `TG_API_HASH` | Telegram API Hash | Да |
| `TG_USER_ID` | Твой Telegram ID | Да |
| `OPENAI_API_KEY` | Для голосовых (Whisper) | Нет |
| `HEARTBEAT_INTERVAL_MINUTES` | Интервал проверок (0 = выкл) | Нет |

## Структура проекта

```
src/
├── main.py              # Точка входа
├── session.py           # Claude Code сессия
├── config.py            # Конфигурация
├── prompts.py           # System prompts
├── heartbeat.py         # Проактивные проверки
├── media.py             # Голосовые и файлы
│
├── telegram/
│   ├── client.py        # Telethon клиент
│   ├── handlers.py      # Обработка сообщений
│   └── auth.py          # Авторизация
│
├── tools/
│   ├── scheduler.py     # Планировщик задач
│   └── __init__.py      # Регистрация tools
│
├── memory/
│   ├── storage.py       # Файловое хранилище
│   ├── index.py         # Векторный поиск
│   └── tools.py         # Memory tools
│
└── mcp_manager/
    ├── registry.py      # Поиск MCP серверов
    ├── config.py        # Конфигурация серверов
    └── tools.py         # Управление через чат
```

## Memory System

Агент помнит контекст между сессиями:

```
/workspace/
├── MEMORY.md            # Долгосрочная память (факты, предпочтения)
├── HEARTBEAT.md         # Чеклист для heartbeat
├── memory/
│   └── 2024-01-15.md    # Дневные логи
└── sessions/
    └── 2024-01-15-*.md  # Транскрипты
```

**Поиск**: гибридный (70% vector + 30% BM25) через sqlite-vec.

## MCP Интеграции

Подключай внешние сервисы через чат:

```
User: подключи postgres
Agent: 🔍 Ищу... Нашёл! Нужен connection string:
User: postgresql://user:pass@host/db
Agent: ✅ Готово! Теперь могу делать SQL запросы.
```

Доступно 700+ серверов в [MCP Registry](https://registry.modelcontextprotocol.io/).

---

## Сильные стороны

| + | Описание |
|---|----------|
| **Автономность** | Агент работает 24/7, сам решает когда писать |
| **Полный доступ** | Может всё что может Claude Code — код, файлы, сеть |
| **Память** | Не теряет контекст между сессиями |
| **Расширяемость** | 700+ MCP интеграций подключаются через чат |
| **Простота** | Один Docker контейнер, минимум настройки |
| **Приватность** | Всё локально, данные не уходят в облако (кроме API) |

## Слабые стороны

| - | Описание |
|---|----------|
| **Один пользователь** | Пока только персональный ассистент |
| **Нет веб-интерфейса** | Только Telegram |
| **OAuth ручной** | Нужно залогиниться в Claude при первом запуске |
| **Нет rate-limiting** | Можно случайно потратить много токенов |
| **Векторный поиск базовый** | sqlite-vec без GPU, может быть медленным на большой памяти |

---

## Что можно прокачать (бизнес)

### 1. Мультипользовательность
```
- Несколько пользователей с изолированными workspace
- Разные уровни доступа (admin, user)
- Shared memory между пользователями (команда)
```

### 2. Веб-интерфейс
```
- Dashboard с историей задач
- Визуальный редактор memory
- Управление MCP серверами через UI
- Мониторинг использования токенов
```

### 3. Marketplace интеграций
```
- Готовые "рецепты" (postgres + grafana + slack)
- One-click установка комплексов
- Шаблоны для типовых задач
```

### 4. Монетизация
```
- SaaS версия (hosted)
- Тарифы по токенам/задачам
- Enterprise с приватным деплоем
- API для интеграции в другие продукты
```

### 5. Улучшение агента
```
- Несколько моделей (Claude, GPT, локальные)
- A/B тестирование промптов
- Аналитика эффективности задач
- Автообучение на фидбеке пользователя
```

### 6. Безопасность
```
- Sandbox уровни (полный доступ / ограниченный)
- Аудит лог действий
- Approval workflow для опасных операций
- Секреты в Vault вместо .env
```

### 7. Интеграции
```
- Календарь (Google, Apple)
- Email (отправка/чтение)
- Банки (проверка баланса, транзакции)
- Умный дом (Home Assistant)
```

---

## Лицензия

MIT

## Автор

[@qanelph](https://github.com/qanelph)
